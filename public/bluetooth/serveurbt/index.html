<!DOCTYPE html>
<html lang="fr-ca" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/420-410/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=420-410/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.142.0">
    <meta name="generator" content="Relearn 7.3.1+80e448e5bdaa92c87ee0d0d86f1125c8606ebf5f">
    <meta name="description" content="Bluetooth a été inventé pour remplacer les câbles qu’on utilisait pour connecter les appareils et leurs périphériques, comme par exemple les écouteurs, les souris ou les manettes de jeu.
Il est basé sur une architecture client-serveur, mais permet seulement une communication de 1 à 1 entre deux composantes: les multiples clients d’un même serveur ne peuvent pas utiliser bluetooth pour communiquer entre eux.
En plus de la version habituelle du protocole, aussi nommée classique, il existe une version allégée nommée Bluetooth LE (aussi BLE, pour “Bluetooth low energy”). Celle-ci a été conçue expressément pour les objets connectés et se caractérise par les aspects suivants:">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Serveur classique :: Introduction aux plateformes IdO">
    <meta name="twitter:description" content="Bluetooth a été inventé pour remplacer les câbles qu’on utilisait pour connecter les appareils et leurs périphériques, comme par exemple les écouteurs, les souris ou les manettes de jeu.
Il est basé sur une architecture client-serveur, mais permet seulement une communication de 1 à 1 entre deux composantes: les multiples clients d’un même serveur ne peuvent pas utiliser bluetooth pour communiquer entre eux.
En plus de la version habituelle du protocole, aussi nommée classique, il existe une version allégée nommée Bluetooth LE (aussi BLE, pour “Bluetooth low energy”). Celle-ci a été conçue expressément pour les objets connectés et se caractérise par les aspects suivants:">
    <meta property="og:url" content="http://localhost:1313/420-410/bluetooth/serveurbt/index.html">
    <meta property="og:site_name" content="Introduction aux plateformes IdO">
    <meta property="og:title" content="Serveur classique :: Introduction aux plateformes IdO">
    <meta property="og:description" content="Bluetooth a été inventé pour remplacer les câbles qu’on utilisait pour connecter les appareils et leurs périphériques, comme par exemple les écouteurs, les souris ou les manettes de jeu.
Il est basé sur une architecture client-serveur, mais permet seulement une communication de 1 à 1 entre deux composantes: les multiples clients d’un même serveur ne peuvent pas utiliser bluetooth pour communiquer entre eux.
En plus de la version habituelle du protocole, aussi nommée classique, il existe une version allégée nommée Bluetooth LE (aussi BLE, pour “Bluetooth low energy”). Celle-ci a été conçue expressément pour les objets connectés et se caractérise par les aspects suivants:">
    <meta property="og:locale" content="fr_ca">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Bluetooth">
    <meta property="article:published_time" content="2024-04-21T20:25:37-04:00">
    <meta property="article:modified_time" content="2024-04-21T20:25:37-04:00">
    <meta itemprop="name" content="Serveur classique :: Introduction aux plateformes IdO">
    <meta itemprop="description" content="Bluetooth a été inventé pour remplacer les câbles qu’on utilisait pour connecter les appareils et leurs périphériques, comme par exemple les écouteurs, les souris ou les manettes de jeu.
Il est basé sur une architecture client-serveur, mais permet seulement une communication de 1 à 1 entre deux composantes: les multiples clients d’un même serveur ne peuvent pas utiliser bluetooth pour communiquer entre eux.
En plus de la version habituelle du protocole, aussi nommée classique, il existe une version allégée nommée Bluetooth LE (aussi BLE, pour “Bluetooth low energy”). Celle-ci a été conçue expressément pour les objets connectés et se caractérise par les aspects suivants:">
    <meta itemprop="datePublished" content="2024-04-21T20:25:37-04:00">
    <meta itemprop="dateModified" content="2024-04-21T20:25:37-04:00">
    <meta itemprop="wordCount" content="1689">
    <title>Serveur classique :: Introduction aux plateformes IdO</title><link rel="icon" href="/420-410/images/favicon.png" type="image/png">

    <link href="/420-410/css/fontawesome-all.min.css?1737577242" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/420-410/css/fontawesome-all.min.css?1737577242" rel="stylesheet"></noscript>
    <link href="/420-410/css/auto-complete.css?1737577242" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/420-410/css/auto-complete.css?1737577242" rel="stylesheet"></noscript>
    <link href="/420-410/css/perfect-scrollbar.min.css?1737577242" rel="stylesheet">
    <link href="/420-410/css/theme.css?1737577242" rel="stylesheet">
    <link href="/420-410/css/format-html.css?1737577242" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313\/420-410';
      window.relearn.min = ``;
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.relearn.themevariants = [ 'green' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant");
        var select = document.querySelector("#R-select-variant");
        if (select) {
          select.value = variant;
        }
      }
      window.relearn.initVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="/420-410/bluetooth/serveurbt/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Bluetooth</span><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Serveur classique</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable bluetooth" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="serveur-classique">Serveur classique</h1>

<p>Bluetooth a été inventé pour remplacer les câbles qu&rsquo;on utilisait pour connecter les appareils et leurs périphériques, comme par exemple les écouteurs, les souris ou les manettes de jeu.</p>
<p>Il est basé sur une architecture client-serveur, mais permet seulement une communication de 1 à 1 entre deux composantes: les multiples clients d&rsquo;un même serveur ne peuvent pas utiliser bluetooth pour communiquer entre eux.</p>
<p>En plus de la version habituelle du protocole, aussi nommée <em>classique</em>, il existe une version allégée nommée <em>Bluetooth LE</em> (aussi <em>BLE</em>, pour &ldquo;Bluetooth low energy&rdquo;). Celle-ci a été conçue expressément pour les objets connectés et se caractérise par les aspects suivants:</p>
<ul>
<li>Faible consommation d&rsquo;énergie</li>
<li>Taux de transferts plus bas</li>
<li>Mieux adaptée aux transferts de petites quantités de données</li>
</ul>
<p>Même si de nombreuses composantes supportent les deux versions de Bluetooth, les deux sont assez différents pour être considérés comme deux protocoles distincts. Il est donc possible que des composantes supportent l&rsquo;un mais pas l&rsquo;autre.</p>
<p>Dans cette section nous allons tester la communication <em>blutooth classique</em> entre un RaspberryPi et un téléphone <em>Android</em> en utilisant la librairie <strong>btferret</strong>.</p>
<h2 id="prérequis">Prérequis</h2>
<h3 id="sur-le-téléphone-android">Sur le téléphone Android</h3>
<ul>
<li>Installer l&rsquo;application <em>Serial Bluetooth Terminal</em>
<ul>
<li><a href="https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal" rel="external" target="_blank">Play Store</a></li>
<li><a href="https://github.com/kai-morich/SimpleBluetoothTerminal?tab=readme-ov-file" rel="external" target="_blank">Code source</a></li>
</ul>
</li>
<li>Trouver l&rsquo;adresse MAC de l&rsquo;interface bluetooth du téléphone</li>
<li>Activer bluetooth</li>
</ul>
<h3 id="sur-le-pi">Sur le Pi</h3>
<ul>
<li>Cloner le projet <a href="https://github.com/petzval/btferret" rel="external" target="_blank">btferret</a></li>
<li>Supprimer le contenu du fichier <code>devices.txt</code> à la racine du projet</li>
</ul>
<h2 id="_btferret_"><em>btferret</em></h2>
<p>Le projet contient de nombreux programmes:</p>
<ul>
<li><code>btlib</code>: la librairie bluetooth et BLE</li>
<li><code>btferret</code>: le programme linux pour utiliser bluetooth</li>
<li><code>bluedot</code>: une application client-serveur pour Android</li>
<li><code>classic_client</code>, <code>classic_server</code>: des applications client-serveur</li>
<li><code>le_client</code>, <code>le_server</code>: des applications client-serveur pour BLE</li>
<li><code>keyboard</code>: permet au Pi de se connecter comme un clavier BT</li>
<li><code>rn4020</code>: programme pour communiquer avec le module RN4020 (BLE)</li>
<li><code>sample</code>: exemple des différents types de connexions supportées par BT</li>
</ul>
<h3 id="première-exécution">Première exécution</h3>
<p>Pour compiler puis exécuter <em>btferret</em>, lancez les commandes suivantes:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>gcc btferret.c btlib.c -o btferret
./btferret</code></pre></div>
<p>Le programme est un utilitaire en ligne de commande qui utilise la librairie <strong>btlib</strong>.</p>
<p>À la première exécution du programme, on a le message suivant:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>It should be added to the devices.txt file as follows:
DEVICE=name (e.g. My Pi) TYPE=MESH  NODE=choose (e.g. 1)  ADDRESS=E4:5F:01:EC:63:4E</code></pre></div>
<p>Donc on ajoute une ligne avec les infos du Pi dans <code>devices.txt</code> (remplacez le nom et l&rsquo;adresse MAC par vos propres valeurs):</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>DEVICE=pi-o TYPE=MESH  NODE=1  ADDRESS=E4:5F:01:EC:63:4E</code></pre></div>
<p>Relancez ensuite le programme pour prendre compte des changements.</p>
<p>Vous devriez voir le contenu de <code>devices.txt</code> suivi d&rsquo;une invite de commandes:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Initialising...
Device data from devices.txt file
DEVICE=pi-o TYPE=MESH  NODE=1  ADDRESS=E4:5F:01:EC:63:4E
h = help
&gt;</code></pre></div>
<p>Pour voir les commandes possibles, faites <code>h</code>. Parmi elles, voici celles qui sont utiles lors des premières phases de la communication:</p>
<ul>
<li><code>a</code> et <code>b</code> pour chercher différents type de périphériques (BT et BLE)</li>
<li><code>i</code> pour des informations sur les périphériques détectés</li>
<li><code>v</code> pour voir les services disponibles sur un périphérique</li>
<li><code>c</code> pour se connecter sur un serveur BT</li>
<li><code>s</code> pour se mettre en mode serveur</li>
</ul>
<h3 id="établir-une-connexion">Établir une connexion</h3>
<p>Avant que deux appareils puissent s&rsquo;échanger des données, quelques étapes sont nécessaires:</p>
<ol>
<li>Découverte des périphériques: l&rsquo;appareil recherche les clients et serveurs à promximité</li>
<li>Appariement (&ldquo;pairing&rdquo;): les deux appareils s&rsquo;échangent des informations qui leur permettront de se reconnaître de manière sécurisée plus tard. Cette étape peut nécessiter une confirmation de l&rsquo;utilisateur sur les appareils.</li>
<li>Connexion: les deux appareils établissent un canal de communication pour une application spécifique (écouteurs, clavier, etc.)</li>
</ol>
<p>La première étape est donc de détecter le téléphone. Cependant lorsqu&rsquo;on fait <code>a</code>, il est très possible qu&rsquo;il n&rsquo;aparaisse pas.</p>
<blockquote>
<p>Pour des raisons de sécurité, la plupart des téléphones d&rsquo;aujourd&rsquo;hui limitent sévèrement les connexions bluetooth entrantes. C&rsquo;est pour cette raison qu&rsquo;il ne sera peut-être pas détecté.</p>
</blockquote>
<p>Ajoutez une ligne dans le fichier <code>devices.txt</code> pour l&rsquo;appareil Android. Attention de bien mettre l&rsquo;adresse MAC de votre téléphone:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>DEVICE=Pixel TYPE=CLASSIC NODE=2 ADDRESS=74:74:46:CB:2B:56</code></pre></div>
<p>Après avoir redémarré le programme, vous pourrez faire la commande <code>i</code> pour voir les informations:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>node                        btlib version 14
1  Local (pi-o)   Mesh transmit off
      E4:5F:01:EC:63:4E
2  Pixel-6  Classic  Not connected
      74:74:46:CB:2B:56</code></pre></div>
<h4 id="informations-sur-les-services">Informations sur les services</h4>
<p>Encore pour des raisons de sécurité, les téléphones n&rsquo;acceptent pas des connexions bluetooth génériques: ils définissent des protocoles (aussi nommés &ldquo;profils&rdquo;) pour des applications spécifiques.</p>
<p>On peut voir les services disponibles sur le téléphone avec <code>v</code>:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Connecting to Pixel-6 to read classic serial services...
Unexpected extra data - add time delays
Unexpected extra data - add time delays
Authentication/PIN fail
Trying again with no link key..
Passkey = 524055  Valid for 10 seconds
Unexpected extra data - add time delays
Unexpected extra data - add time delays
Pixel-6 has disconnected

Pixel-6 RFCOMM serial channels
  2  Headset Gateway
    UUID = 1112  Headset Audio Gateway
  3  Handsfree Gateway
    UUID = 111F  HandsfreeAudioGateway
  4  SMS/MMS
    UUID = 1132  Message Access Server
  5  OBEX Phonebook Access Server
    UUID = 112F  Phonebook Access PSE
  6  SIM Access
    UUID = 112D  SIM_Access
  7  OBEX Object Push
    UUID = 1105  OBEXObjectPush</code></pre></div>
<p>Dans cet exemple, on retrouve des profils pour les connexions d&rsquo;écouteurs, l&rsquo;accès aux contacts ou à la carte SIM, etc. Cependant, le programme <em>btferret</em> n&rsquo;implémente pas les profils permettant d&rsquo;utiliser ces services.</p>
<h4 id="mode-serveur">Mode serveur</h4>
<p>On configure le Pi en mode serveur afin que la connexion puisse être initiée par le téléphone en mode client.</p>
<p>Au menu de démarrage de <em>btferret</em>, faites la commande <code>s</code>. Ensuite il faut choisir le mode &ldquo;Classique&rdquo;, l&rsquo;identifiant du client puis le type de sécurité (0)</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>&gt; s

  0 = node server
  1 = classic server
  2 = LE server
  3 = mesh server
Input server type 0/1/2/3  (x=cancel)
? 1

Input node of client that will connect

CLASSIC servers + NODE servers
 2 - Pixel-6
 0 - Any device
Input node  (x=cancel)
? 2

Client&#39;s security  (0,1,3 to pair or connect Android/Windows.. clients)
  0 = Use link key, print passkey here, remote may ask to confirm
  1 = No link key,  print passkey here (forces re-pair if pairing fails)
  2 = No keys  (connecting client is another mesh Pi)
  3 = Use link key, no passkey
  4 = Use link key, remote prints passkey, enter it here if asked

Client&#39;s security requirement  (x=cancel)
? 0

Server will listen on channel 1 and any of the following UUIDs
  Standard serial 2-byte 1101
  Standard serial 16-byte
  Custom serial set via register serial
Listening for Pixel-6 to connect (x=cancel)</code></pre></div>
<p>Du côté du téléphone Android, il sera ensuite possible de se connecter avec l&rsquo;application <em>Serial Bluetooth Terminal</em> pour envoyer des messages au Pi.</p>
<h4 id="exercice-1">Exercice 1</h4>
<p>Compiler puis exécutez le programme <code>classic_server.c</code> et envoyez-lui des messages à partir de votre téléphone.</p>
<h4 id="exercice-2">Exercice 2</h4>
<p>Modifiez le programme serveur pour qu&rsquo;il réponde &ldquo;pong&rdquo; lorsqu&rsquo;il reçoit le message &ldquo;ping&rdquo; et qu&rsquo;il se déconnecte pour n&rsquo;importe quel autre message.

<details class=" box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Solution
  </summary>
  <div class="box-content">
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;btlib.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> security, keyflag;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">init_blue</span>(<span style="color:#e6db74">&#34;devices.txt&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  security <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">classic_server</span>(ANY_DEVICE, callback, <span style="color:#ae81ff">10</span>, keyflag);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">close_all</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>message <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;pong</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;   %s&#34;</span>, data);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(data, <span style="color:#e6db74">&#34;ping</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write_node</span>(node, message, <span style="color:#a6e22e">strlen</span>(message));
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%s&#34;</span>, message);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (SERVER_EXIT);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (SERVER_CONTINUE);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  </div>
</details></p>
<h4 id="exercice-3">Exercice 3</h4>
<p>Connectez le module LED sur votre Pi. Modifiez ensuite le programme serveur pour que &ldquo;1&rdquo; allume la LED et &ldquo;0&rdquo; l&rsquo;éteigne.

<details class=" box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Solution
  </summary>
  <div class="box-content">
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;btlib.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;pigpio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define LED 26
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> security, keyflag;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Initialiser
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">gpioInitialise</span>() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Erreur d&#39;initialisation pigpio</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Définir en mode output
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gpioSetMode</span>(LED, PI_OUTPUT);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">init_blue</span>(<span style="color:#e6db74">&#34;devices.txt&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    security <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">classic_server</span>(ANY_DEVICE, callback, <span style="color:#ae81ff">10</span>, keyflag);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">close_all</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;   %s&#34;</span>, data);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (data[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;1&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">gpioWrite</span>(LED, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">gpioWrite</span>(LED, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (SERVER_CONTINUE);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  </div>
</details></p>
<h4 id="exercice-4">Exercice 4</h4>
<p>Avec une autre équipe, adaptez les programmes<code>classic_client.c</code> et <code>classic_server.c</code> pour faire un programme de <em>chat</em> simple: une fois connecté, le client et le serveur peuvent s&rsquo;échanger des messages comme suit:</p>
<p><strong>Serveur</strong></p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Connected OK
Waiting for data from Raspberrypi        (x = stop server)
        hey
&gt; salut
        boum
&gt; pouet
Raspberrypi      has disconnected</code></pre></div>
<p><strong>Client</strong></p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Connect OK
&gt; hey
        salut
&gt; boum
        pouet
&gt; *</code></pre></div>
<p>Lorsque le client envoit le caractère <code>*</code>, le serveur se déconnecte.</p>
<p>La fonction <code>read_node_endchar()</code> (<a href="https://github.com/petzval/btferret?tab=readme-ov-file#4-2-37-read_node_endchar" rel="external" target="_blank">référence</a>) sera utile pour le programme client.</p>

<details class=" box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Solution
  </summary>
  <div class="box-content">
<h5 id="serveur">SERVEUR</h5>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;btlib.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> security, keyflag;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">init_blue</span>(<span style="color:#e6db74">&#34;devices.txt&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Essayer 0,1,2,3 si problème
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    security <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_LOCAL;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_OFF <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (security <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>        keyflag <span style="color:#f92672">=</span> KEY_ON <span style="color:#f92672">|</span> PASSKEY_OFF;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">classic_server</span>(ANY_DEVICE, callback, <span style="color:#ae81ff">10</span>, keyflag);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">close_all</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">int</span> node, <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">int</span> len)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>message;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">size_t</span> length <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;        %s&#34;</span>, data);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (data[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Déconnexion</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> (SERVER_EXIT);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;&gt; &#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getline</span>(<span style="color:#f92672">&amp;</span>message, <span style="color:#f92672">&amp;</span>length, stdin);
</span></span><span style="display:flex;"><span>    message[length] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\n&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write_node</span>(node, message, <span style="color:#a6e22e">strlen</span>(message));
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">free</span>(message);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (SERVER_CONTINUE);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h5 id="client">CLIENT</h5>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;btlib.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define NODE_ID 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define END_CHAR 10 </span><span style="color:#75715e">// \n
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> channel, ret;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>message;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">size_t</span> len <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> buf[MAX_SIZE];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">init_blue</span>(<span style="color:#e6db74">&#34;devices.txt&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    channel <span style="color:#f92672">=</span> <span style="color:#a6e22e">find_channel</span>(NODE_ID, UUID_16, <span style="color:#a6e22e">strtohex</span>(<span style="color:#e6db74">&#34;00001101-0000-1000-8000-00805F9B34FB&#34;</span>, NULL));
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">connect_node</span>(NODE_ID, CHANNEL_NEW, channel);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;&gt; &#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">getline</span>(<span style="color:#f92672">&amp;</span>message, <span style="color:#f92672">&amp;</span>len, stdin);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">write_node</span>(NODE_ID, message, <span style="color:#a6e22e">strlen</span>(message));
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">free</span>(message);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ret <span style="color:#f92672">=</span> <span style="color:#a6e22e">read_node_endchar</span>(NODE_ID, buf, MAX_SIZE, END_CHAR, EXIT_TIMEOUT, <span style="color:#ae81ff">300000</span>); 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;        %s&#34;</span>,buf);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">disconnect_node</span>(NODE_ID);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">close_all</span>();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  </div>
</details>
<h4 id="exercice-5">Exercice 5</h4>
<p>Dans cet exercice, un message doit circuler à travers toutes les équipes: chaque équipe reçoit un message d&rsquo;une autre équipe et doit immédiatement le retransmettre à une 3e équipe. Votre programme doit donc:</p>
<ul>
<li>Démarrer en mode serveur</li>
<li>Recevoir un message</li>
<li>Arrêter le serveur</li>
<li>Se connecter sur un autre serveur et envoyer le message.</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<svg width="255" height="68.003" viewBox="0 0 350 68.003" xmlns="http://www.w3.org/2000/svg"><g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#ffffff" stroke-width="0.25mm" fill="#ffffff" style="stroke:#ffffff;stroke-width:0.25mm;fill:#ffffff"><path d="M 100.4 67.002 L 56.6 67.002 L 56.6 65.602 Q 65.5 58.202 72.7 52.002 A 220.885 220.885 0 0 0 79.022 46.354 Q 81.944 43.635 84.444 41.079 A 132.81 132.81 0 0 0 85.15 40.352 Q 89.831 35.492 92.564 30.912 A 35.666 35.666 0 0 0 93.2 29.802 Q 96 24.702 96 19.502 A 23.026 23.026 0 0 0 95.376 13.982 A 15.644 15.644 0 0 0 90.95 6.202 Q 85.9 1.402 77.2 1.402 A 23.25 23.25 0 0 0 70.975 2.193 A 17.307 17.307 0 0 0 63.1 6.802 A 19.378 19.378 0 0 0 58.069 16.175 A 27.398 27.398 0 0 0 57.4 21.202 L 55.9 20.602 A 27.734 27.734 0 0 1 56.698 15.069 A 21.147 21.147 0 0 1 58.85 9.702 Q 61.5 5.102 66.2 2.552 A 20.811 20.811 0 0 1 72.968 0.317 A 27.399 27.399 0 0 1 77.2 0.002 A 29.218 29.218 0 0 1 81.794 0.347 A 22.6 22.6 0 0 1 85.65 1.302 A 17.842 17.842 0 0 1 90.38 3.748 A 16.244 16.244 0 0 1 92.05 5.152 Q 94.7 7.702 96.1 11.302 A 20.224 20.224 0 0 1 97.269 15.929 A 26.583 26.583 0 0 1 97.5 19.502 A 23.288 23.288 0 0 1 94.81 30.249 A 30.041 30.041 0 0 1 92.9 33.452 Q 88.3 40.202 79.75 47.852 Q 73.872 53.111 66.41 59.481 A 1196.423 1196.423 0 0 1 59.3 65.502 L 59.3 65.602 L 60.25 65.602 L 61.2 65.602 L 62.1 65.602 L 100.4 65.602 L 100.4 67.002 Z M 35 67.002 L 33.4 67.002 L 33.4 46.502 L 0 46.502 L 0 45.102 L 32.8 1.002 L 35 1.002 L 35 45.102 L 48.9 45.102 L 48.9 46.502 L 35 46.502 L 35 67.002 Z M 244.1 67.002 L 242.5 67.002 L 242.5 46.502 L 209.1 46.502 L 209.1 45.102 L 241.9 1.002 L 244.1 1.002 L 244.1 45.102 L 258 45.102 L 258 46.502 L 244.1 46.502 L 244.1 67.002 Z M 134.1 68.002 Q 122.8 68.002 116.7 59.202 A 29.95 29.95 0 0 1 112.765 50.844 Q 111.549 46.872 111.016 42.051 A 73.401 73.401 0 0 1 110.6 34.002 Q 110.6 23.331 113.182 15.878 A 29.029 29.029 0 0 1 116.7 8.802 Q 122.8 0.002 134.1 0.002 Q 145.4 0.002 151.5 8.802 A 29.95 29.95 0 0 1 155.435 17.16 Q 156.651 21.131 157.184 25.953 A 73.401 73.401 0 0 1 157.6 34.002 Q 157.6 44.672 155.018 52.125 A 29.029 29.029 0 0 1 151.5 59.202 Q 145.4 68.002 134.1 68.002 Z M 321.4 68.002 Q 310.1 68.002 304 59.202 A 29.95 29.95 0 0 1 300.065 50.844 Q 298.849 46.872 298.316 42.051 A 73.401 73.401 0 0 1 297.9 34.002 Q 297.9 23.331 300.482 15.878 A 29.029 29.029 0 0 1 304 8.802 Q 310.1 0.002 321.4 0.002 Q 332.7 0.002 338.8 8.802 A 29.95 29.95 0 0 1 342.735 17.16 Q 343.951 21.131 344.484 25.953 A 73.401 73.401 0 0 1 344.9 34.002 Q 344.9 44.672 342.318 52.125 A 29.029 29.029 0 0 1 338.8 59.202 Q 332.7 68.002 321.4 68.002 Z M 282.7 67.002 L 281.1 67.002 L 281.1 10.202 L 281.1 7.102 L 281.1 4.002 Q 278.1 8.902 273.35 12.152 A 39.094 39.094 0 0 1 266.547 15.906 A 34.337 34.337 0 0 1 263.6 17.002 L 263.1 15.702 Q 265.8 14.702 268.45 13.302 Q 271.1 11.902 273.5 10.052 Q 275.9 8.202 277.85 5.952 Q 279.8 3.702 281.1 1.002 L 282.7 1.002 L 282.7 67.002 Z M 134.1 66.602 A 22.253 22.253 0 0 0 139.882 65.884 A 17.301 17.301 0 0 0 146.05 62.852 A 19.885 19.885 0 0 0 150.779 57.51 Q 152.334 54.995 153.45 51.802 A 41.889 41.889 0 0 0 155.193 44.802 Q 155.773 41.284 155.936 37.244 A 80.409 80.409 0 0 0 156 34.002 Q 156 23.402 153.45 16.152 Q 150.9 8.902 146.05 5.152 Q 141.2 1.402 134.1 1.402 A 21.727 21.727 0 0 0 128.093 2.198 A 17.569 17.569 0 0 0 122.2 5.152 A 20.005 20.005 0 0 0 117.32 10.657 Q 115.919 12.941 114.886 15.772 A 34.522 34.522 0 0 0 114.75 16.152 Q 112.664 22.084 112.284 30.258 A 80.802 80.802 0 0 0 112.2 34.002 A 72.19 72.19 0 0 0 112.589 41.716 Q 113.006 45.592 113.871 48.905 A 37.497 37.497 0 0 0 114.75 51.802 A 29.135 29.135 0 0 0 117.155 57.055 Q 119.252 60.596 122.2 62.852 A 18.121 18.121 0 0 0 131.112 66.419 A 23.774 23.774 0 0 0 134.1 66.602 Z M 321.4 66.602 A 22.253 22.253 0 0 0 327.182 65.884 A 17.301 17.301 0 0 0 333.35 62.852 A 19.885 19.885 0 0 0 338.079 57.51 Q 339.634 54.995 340.75 51.802 A 41.889 41.889 0 0 0 342.493 44.802 Q 343.073 41.284 343.236 37.244 A 80.409 80.409 0 0 0 343.3 34.002 Q 343.3 23.402 340.75 16.152 Q 338.2 8.902 333.35 5.152 Q 328.5 1.402 321.4 1.402 A 21.727 21.727 0 0 0 315.393 2.198 A 17.569 17.569 0 0 0 309.5 5.152 A 20.005 20.005 0 0 0 304.62 10.657 Q 303.219 12.941 302.186 15.772 A 34.522 34.522 0 0 0 302.05 16.152 Q 299.964 22.084 299.584 30.258 A 80.802 80.802 0 0 0 299.5 34.002 A 72.19 72.19 0 0 0 299.889 41.716 Q 300.306 45.592 301.171 48.905 A 37.497 37.497 0 0 0 302.05 51.802 A 29.135 29.135 0 0 0 304.455 57.055 Q 306.552 60.596 309.5 62.852 A 18.121 18.121 0 0 0 318.412 66.419 A 23.774 23.774 0 0 0 321.4 66.602 Z M 1.8 45.102 L 33.4 45.102 L 33.4 8.802 L 33.4 5.752 L 33.4 2.702 L 33.3 2.702 Q 32.3 4.202 31.15 5.702 A 110.715 110.715 0 0 0 29.509 7.895 A 96.037 96.037 0 0 0 29 8.602 L 1.8 45.102 Z M 210.9 45.102 L 242.5 45.102 L 242.5 8.802 L 242.5 5.752 L 242.5 2.702 L 242.4 2.702 Q 241.4 4.202 240.25 5.702 A 110.715 110.715 0 0 0 238.609 7.895 A 96.037 96.037 0 0 0 238.1 8.602 L 210.9 45.102 Z M 170.4 39.202 L 198.5 39.202 L 198.5 40.802 L 170.4 40.802 L 170.4 39.202 Z" vector-effect="non-scaling-stroke"/></g></svg>

        </div>
        <script>
          window.index_js_url="/420-410/searchindex.en.js?1737577242";
        </script>
        <search><form action="/420-410/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['fr'];
        </script>
        <script src="/420-410/js/auto-complete.js?1737577242" defer></script>
        <script src="/420-410/js/lunr/lunr.min.js?1737577242" defer></script>
        <script src="/420-410/js/lunr/lunr.stemmer.support.min.js?1737577242" defer></script>
        <script src="/420-410/js/lunr/lunr.multi.min.js?1737577242" defer></script>
        <script src="/420-410/js/lunr/lunr.fr.min.js?1737577242" defer></script>
        <script src="/420-410/js/search.js?1737577242" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-shortcutmenu-home" class="R-sidebarmenu">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/420-410/pr%C3%A9paration/index.html"><a class="padding" href="/420-410/pr%C3%A9paration/index.html">1. Préparation</a><ul id="R-subsections-481e5bcc4180197d50b8ef2fafbb3420" class="collapsible-menu"></ul></li>
          </ul>
        </div>
    
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/420-410/bluetooth/serveurbt/index.html" lang="fr-ca" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.relearn.changeVariant( this.value );">
                      <option id="R-select-variant-green" value="green" selected>Green</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.relearn.markVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Licence Creative Commons"
        style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br>Creative Commons
BY-NC-SA
          </div>
        </div>
      </div>
    </aside>
    <script src="/420-410/js/clipboard.min.js?1737577242" defer></script>
    <script src="/420-410/js/perfect-scrollbar.min.js?1737577242" defer></script>
    <script src="/420-410/js/theme.js?1737577242" defer></script>
  </body>
</html>
